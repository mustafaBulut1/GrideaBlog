<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profilim</title>
  <link rel="stylesheet" href="profile.css">
</head>
<body>

    <nav class="navbar"> 
        <div class="navbar-left">
            <a href="../homepage.html">Gridea Forum</a>
           
        </div>
    
        <div class="navbar-right">
            <div class="user-area">
                <a href="../login.html"  class="btn">GiriÅŸ Yap</a>
            </div>
            <div class="write-area">
                <a href="../addPost.html"  class="btn">Yaz</a>
            </div>
            
        </div>
    </nav>

    
    <div class="profile-header">
        <div class="avatar"></div>
        <h2 id="username">ğŸ‘¤ KullanÄ±cÄ± AdÄ±</h2>
        <p id="joined-date">ğŸ“… KatÄ±lÄ±m Tarihi: ...</p>
    </div>

    <div class="user-posts">
        <h3>ğŸ“š YazÄ±larÄ±m</h3>
        <ul id="user-post-list">
        <li>YazÄ±lar yÃ¼kleniyor...</li>
        </ul>
    </div>

  

  <script>
    async function loadUserData() {
      const sessionRes = await fetch('/session-info');
      const session = await sessionRes.json();

      if (!session.loggedIn) {
        window.location.href = '/login.html';
        return;
      }

      document.getElementById('username').textContent = `ğŸ‘¤ ${session.user.username}`;

      // KatÄ±lÄ±m tarihi varsayÄ±msal olarak hesaplanÄ±yor (gerekirse db'den Ã§ekilebilir)
      document.getElementById('joined-date').textContent = `ğŸ“… KatÄ±lÄ±m Tarihi: 2025`;

      // YazÄ±larÄ± getir
      const postsRes = await fetch('/posts');
      const posts = await postsRes.json();
      const list = document.getElementById('user-post-list');
      list.innerHTML = '';

      const userPosts = posts.filter(post => post.user_id === session.user.id);

      if (userPosts.length === 0) {
        list.innerHTML = '<li>HenÃ¼z bir yazÄ± paylaÅŸmadÄ±nÄ±z.</li>';
        return;
      }

      userPosts.forEach(post => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="/post.html?id=${post.id}">${post.title}</a>`;
        list.appendChild(li);
      });
    }

    window.addEventListener('DOMContentLoaded', loadUserData);
  </script>

    <script src="/navbar.js"></script>

    <footer class="footer">
        <p>Â© 2025 Gridea Forum. TÃ¼m HaklarÄ± SaklÄ±dÄ±r.</p>
    </footer>
</body>
</html>
